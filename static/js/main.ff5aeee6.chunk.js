(this["webpackJsonpdigitalart-dapp"]=this["webpackJsonpdigitalart-dapp"]||[]).push([[0],{1e3:function(e,t){},1012:function(e,t){},1014:function(e,t){},1231:function(e,t){},1236:function(e,t){},1238:function(e,t){},1245:function(e,t){},1258:function(e,t){},1269:function(e,t,n){},1270:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(42),s=n.n(i),c=n(4),o=n.n(c),l=n(72),d=n(26),u=n(22),p=n(1302),m=n(1303),b=n(1299),j=n(635),x=n(1328),f=n(1321),h=n(1322),g=n(1276),y=n(1300),O=n(225),v=n(1301),N=n(107),w=n.n(N),k=n(106),T=n.n(k),C=n.p+"static/media/logo.d54e03e3.svg",L=n(1),I=T()((function(e){return w()({container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",paddingBottom:e.spacing(8),flex:1,height:"100vh"},logo:{height:"200px",pointerEvents:"none",marginBottom:e.spacing(2)},appName:{padding:e.spacing(2),marginBottom:e.spacing(2),textAlign:"center"},button:{marginTop:e.spacing(1),width:"300px",border:"1.5px solid"}})}));function P(e){var t=I();return Object(L.jsxs)(y.a,{className:t.container,maxWidth:"md",children:[Object(L.jsx)("img",{className:t.logo,src:C,alt:"logo"}),Object(L.jsx)(O.a,{className:t.appName,variant:"h6",children:Object(L.jsx)("b",{children:"NFT Marketplace with Royalty Redistribution & IPR Management "})}),Object(L.jsx)(v.a,{className:t.button,onClick:e.connect,variant:"outlined",children:"Connect Your Wallet"})]})}var S=n(614),A=n.n(S),B=n(1306),F=n(1307),E=n(1308),M=n(1309),D=n(1310),_=n(1312),R=n(52),U=r.a.createContext(null),W=n(53),H=n(71),z=Object(p.a)((function(){return Object(m.a)({box:{display:"flex",flexDirection:"column",overflowY:"auto",height:"90vh",width:"100vw"},container:{display:"flex",flexDirection:"column",flex:1}})}));function Y(e){var t=e.children,n=e.className,a=e.maxWidth,r=z();return Object(L.jsx)(x.a,{className:r.box,children:Object(L.jsx)(y.a,{className:r.container+" "+n,maxWidth:a||"sm",children:t||!1})})}var G=n(1304),q=Object(p.a)((function(e){return Object(m.a)({title:{textAlign:"center"},emptyListBox:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",paddingBottom:e.spacing(8)},emptyListText:{color:e.palette.text.hint},cardsBox:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",textAlign:"center",flexWrap:"wrap",flexShrink:1},card:Object(H.a)({margin:e.spacing(1),paddingBottom:e.spacing(1),border:"1px solid black",width:"33vw"},e.breakpoints.down("sm"),{width:"86vw"})})}));function V(e){var t=e.children,n=e.fab,a=e.pageTitle,r=e.errorMessage,i=e.filteredNFTs,s=q();return Object(L.jsxs)(Y,{maxWidth:"xl",children:[Object(L.jsx)(O.a,{variant:"h5",component:"h1",className:s.title,children:a}),i.length>0?Object(L.jsx)(G.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",children:t}):Object(L.jsxs)(x.a,{className:s.emptyListBox,children:[Object(L.jsx)(O.a,{className:s.emptyListText,variant:"h4",children:"No NFTs!"}),Object(L.jsx)(O.a,{className:s.emptyListText,variant:"subtitle1",children:r})]}),n]})}var J=Object(p.a)((function(e){return Object(m.a)({cardsBox:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",textAlign:"center",flexWrap:"wrap",flexShrink:1},card:Object(H.a)({margin:e.spacing(1),paddingBottom:e.spacing(1),border:"1px solid black",width:"33vw"},e.breakpoints.down("sm"),{width:"86vw"}),cardContent:{padding:e.spacing(1)},cardImage:Object(H.a)({width:"100%",height:"50vh"},e.breakpoints.down("sm"),{height:"55vh"}),cardText:{textAlign:"left"}})})),K=n(1329),$=n(150),Q=n.n($),X=Object(p.a)((function(e){return Object(m.a)({ownershipBox:{marginTop:e.spacing(2),display:"flex",width:"100%"},ownerArtistBox:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center"},ownershipText:{textAlign:"left",padding:0,margin:0,fontSize:"0.8rem"},avatar:{backgroundColor:"transparent"}})}));function Z(e){var t=e.artist,n=e.owner,a=X();return Object(L.jsxs)(x.a,{className:a.ownershipBox,children:[Object(L.jsxs)(x.a,{className:a.ownerArtistBox,children:[Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body1",className:a.ownershipText,color:"textSecondary",children:"ARTIST"}),Object(L.jsx)(K.a,{className:a.avatar,children:Object(L.jsx)("a",{href:"https://ropsten.etherscan.io/address/".concat(t),target:"blank",children:Object(L.jsx)(Q.a,{string:t,size:32})})})]}),Object(L.jsxs)(x.a,{className:a.ownerArtistBox,children:[Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body1",className:a.ownershipText,color:"textSecondary",children:"OWNER"}),Object(L.jsx)(K.a,{className:a.avatar,children:Object(L.jsx)("a",{href:"https://ropsten.etherscan.io/address/".concat(n),target:"blank",children:Object(L.jsx)(Q.a,{string:n,size:32})})})]})]})}var ee=n(1330),te=n(1305),ne=Object(p.a)((function(e){return Object(m.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#FFF"}})}));function ae(e){var t=e.open,n=e.onClose,a=ne();return Object(L.jsx)(ee.a,{className:a.backdrop,open:t,onClick:n,children:Object(L.jsx)(te.a,{color:"inherit"})})}function re(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.a.useState(e),n=Object(u.a)(t,2),a=n[0],i=n[1];function s(){i(!0)}function c(){i(!1)}return[a,s,c]}var ie=Object(p.a)((function(e){return Object(m.a)({fab:{position:"absolute",right:e.spacing(2),bottom:e.spacing(2)}})}));function se(){var e=ie(),t=J(),n=Object(R.g)(),a=re(),i=Object(u.a)(a,3),s=i[0],c=void 0===s||s,o=i[1],l=i[2],d=r.a.useContext(U)._nfts;r.a.useEffect((function(){o()}),[]),r.a.useEffect((function(){l()}),[d]);var p=d.length>0?d.filter((function(e){return e.sellingPrice>0||e.dailyLicensePrice>0})):[];return Object(L.jsxs)(V,{fab:Object(L.jsx)(B.a,{className:e.fab,onClick:function(){return n.push("/market/mint")},children:Object(L.jsx)(A.a,{})}),pageTitle:"MARKET",errorMessage:"There are no NFTs on sale or licensable yet!",filteredNFTs:p,children:[p.length>0&&p.sort((function(e,t){return e.id-t.id})).map((function(e,a){return Object(L.jsx)(x.a,{className:t.cardsBox,children:Object(L.jsx)(F.a,{className:t.card,children:Object(L.jsxs)(E.a,{children:[Object(L.jsx)(M.a,{component:"img",alt:e.metadata.title,image:e.metadata.image,title:e.metadata.title,className:t.cardImage,onClick:function(){return n.push("/market/".concat(e.id))}}),Object(L.jsxs)(D.a,{className:t.cardContent,children:[Object(L.jsxs)(x.a,{onClick:function(){return n.push("/market/".concat(e.id))},children:[Object(L.jsx)(O.a,{variant:"h5",component:"h2",className:t.cardText,children:e.metadata.title}),Object(L.jsxs)(O.a,{variant:"h6",component:"h3",className:t.cardText,style:{color:"green"},children:[Number(Object(W.formatUnits)(e.sellingPrice.toString()))," ","\u039e"," ","/"," ",Number(Object(W.formatUnits)(e.dailyLicensePrice.toString()))," ","\u039e"]})]}),Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body2",className:t.cardText,color:"textSecondary",style:{padding:0,fontSize:"0.8rem"},children:Object(L.jsx)("i",{children:"List price / Daily license price"})}),Object(L.jsx)(_.a,{style:{backgroundColor:"black"}}),Object(L.jsx)(Z,{artist:e.artist,owner:e.owner})]})]})})},a)})),Object(L.jsx)(ae,{open:c})]})}var ce=r.a.createContext(null),oe=n(634);var le=n(618),de=n(633),ue=n.n(de),pe=n(632),me=n.n(pe),be=n(630),je=n.n(be),xe=n(631),fe=n.n(xe),he=n(1331),ge=n(1313),ye=n(1314),Oe=n(1315),ve=n(1316),Ne=n(619),we=n.n(Ne),ke=n(621),Te=n.n(ke),Ce=n(620),Le=n.n(Ce),Ie=n(622),Pe=n.n(Ie),Se=n(79),Ae=Object(p.a)((function(e){return Object(m.a)({list:{width:250},currentUser:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2)},link:{color:"inherit",textDecoration:"none"},divider:{marginLeft:"5%",width:"90%"}})}));function Be(e){var t=e.open,n=e.onClose,a=Ae(),i=r.a.useContext(U)._signerAddress;return Object(L.jsx)(he.a,{anchor:"left",open:t,onClose:n,children:Object(L.jsxs)("div",{className:a.list,role:"presentation",children:[Object(L.jsxs)("div",{className:a.currentUser,children:[Object(L.jsx)(K.a,{style:{backgroundColor:"transparent"},children:Object(L.jsx)("a",{href:"https://ropsten.etherscan.io/address/".concat(i),target:"blank",children:Object(L.jsx)(Q.a,{string:i,size:32})})}),Object(L.jsxs)(O.a,{variant:"body1",children:[i.substr(0,12),"...",i.substr(38)]})]}),Object(L.jsx)(_.a,{}),Object(L.jsxs)(ge.a,{children:[Object(L.jsx)(Se.b,{to:"/market",className:a.link,children:Object(L.jsxs)(ye.a,{onClick:n,button:!0,children:[Object(L.jsx)(Oe.a,{children:Object(L.jsx)(we.a,{})}),Object(L.jsx)(ve.a,{primary:"Marketplace"})]})}),Object(L.jsx)(Se.b,{to:"/artworks",className:a.link,children:Object(L.jsxs)(ye.a,{onClick:n,button:!0,children:[Object(L.jsx)(Oe.a,{children:Object(L.jsx)(Le.a,{})}),Object(L.jsx)(ve.a,{primary:"Your artworks"})]})}),Object(L.jsx)(Se.b,{to:"/collection",className:a.link,children:Object(L.jsxs)(ye.a,{onClick:n,button:!0,children:[Object(L.jsx)(Oe.a,{children:Object(L.jsx)(Te.a,{})}),Object(L.jsx)(ve.a,{primary:"Your collection"})]})}),Object(L.jsx)(Se.b,{to:"/licenses",className:a.link,children:Object(L.jsxs)(ye.a,{onClick:n,button:!0,children:[Object(L.jsx)(Oe.a,{children:Object(L.jsx)(Pe.a,{})}),Object(L.jsx)(ve.a,{primary:"Your licenses"})]})})]})]})})}var Fe=n(65),Ee=n(1317),Me=n(1318),De=n(151),_e=n.n(De),Re=n(9),Ue=n(284),We=n.n(Ue),He=T()((function(e){return w()({expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},list:{width:"100%",maxWidth:"90%",backgroundColor:e.palette.background.paper,padding:0},inline:{display:"inline"},expandedContent:{display:"flex",flex:1,flexDirection:"column"}})}));function ze(){var e=He(),t=J(),n=r.a.useState(new Map),a=Object(u.a)(n,2),i=a[0],s=a[1],c=r.a.useState(new Map),l=Object(u.a)(c,2),p=l[0],m=l[1],b=re(),j=Object(u.a)(b,3),f=j[0],h=j[1],y=j[2],v=re(),N=Object(u.a)(v,3),w=N[0],k=void 0===w||w,T=N[1],C=N[2],I=r.a.useContext(U),P=I._nfts,S=I._signerAddress,A=I.getTokenPurchasedEventsForNFT,B=I.getLicensePurchasedEventsForNFT;return r.a.useEffect((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Map,n=new Map,a=0;case 3:if(!(a<P.length)){e.next=19;break}return e.t0=t,e.t1=Number(P[a].id),e.next=8,A(Number(P[a].id));case 8:return e.t2=e.sent,e.t0.set.call(e.t0,e.t1,e.t2),e.t3=n,e.t4=Number(P[a].id),e.next=14,B(Number(P[a].id));case 14:e.t5=e.sent,e.t3.set.call(e.t3,e.t4,e.t5);case 16:a++,e.next=3;break;case 19:s(t),m(n),C();case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();T(),e()}),[P]),Object(L.jsxs)(V,{pageTitle:"ARTWORKS",errorMessage:"Make your craft and mint your unique NFT to see it shown on this page!",filteredNFTs:P.length>0?P.filter((function(e){return e.artist===S})):[],children:[P.length>0&&P.sort((function(e,t){return e.id-t.id})).filter((function(e){return e.artist===S})).map((function(n,a){var r,s;return Object(L.jsx)(x.a,{className:t.cardsBox,children:Object(L.jsx)(F.a,{className:t.card,children:Object(L.jsxs)(E.a,{children:[Object(L.jsx)(M.a,{component:"img",alt:n.metadata.title,image:n.metadata.image,title:n.metadata.title,className:t.cardImage}),Object(L.jsxs)(D.a,{className:t.cardContent,children:[Object(L.jsxs)(x.a,{children:[Object(L.jsx)(O.a,{variant:"h5",component:"h2",className:t.cardText,children:n.metadata.title}),Object(L.jsxs)(O.a,{variant:"h6",component:"h3",className:t.cardText,style:{color:"green"},children:[i.get(Number(n.id))?Number(Object(W.formatUnits)(i.get(Number(n.id)).reduce((function(e,t){return t&&(e+=Number(t.price)),e}),0).toString())):"0"," ","\u039e"," /"," ",p.get(Number(n.id))?Number(Object(W.formatUnits)(p.get(Number(n.id)).reduce((function(e,t){return t&&(e+=Number(t.price)),e}),0).toString())):"0"," ","\u039e"]})]}),Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body2",className:t.cardText,color:"textSecondary",style:{padding:0,fontSize:"0.8rem"},children:Object(L.jsx)("i",{children:"Reselling / Licensing total earnings"})}),Object(L.jsx)(g.a,{className:Object(Re.a)(e.expand,Object(H.a)({},e.expandOpen,f)),onClick:f?y:h,"aria-expanded":f,"aria-label":"show more",disabled:!(null===(r=i.get(Number(n.id)))||void 0===r?void 0:r.length)&&!(null===(s=p.get(Number(n.id)))||void 0===s?void 0:s.length),children:Object(L.jsx)(_e.a,{})}),Object(L.jsx)(Ee.a,{in:f,timeout:"auto",unmountOnExit:!0,children:Object(L.jsx)(D.a,{children:Object(L.jsx)(ge.a,{className:e.list,children:i.get(Number(n.id))&&p.get(Number(n.id))&&[].concat(Object(Fe.a)(i.get(Number(n.id))),Object(Fe.a)(p.get(Number(n.id)))).sort((function(e,t){return t.timestamp-e.timestamp})).map((function(t,n){return Object(L.jsxs)(ye.a,{alignItems:"center",children:[Object(L.jsx)(Me.a,{children:Object(L.jsx)("a",{href:"https://ropsten.etherscan.io/address/".concat(t.sender&&t.sender.length>0?t.sender:t.newOwner),target:"blank",children:Object(L.jsx)(Q.a,{string:t.sender&&t.sender.length>0?t.sender:t.newOwner,size:32})})}),Object(L.jsx)(ve.a,{style:{minWidth:"100%"},primary:Object(L.jsxs)(x.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(L.jsx)(O.a,{component:"span",variant:"h6",className:e.inline,color:"textPrimary",children:t.sender&&t.sender.length>0?"Bought a License!":"Bought the NFT!"}),Object(L.jsx)("a",{href:"https://ropsten.etherscan.io/tx/".concat(t.txHash),target:"blank",style:{alignItems:"center",display:"flex"},children:Object(L.jsx)(We.a,{style:{color:"green",fontSize:"1.2rem"}})})]}),secondary:Object(L.jsxs)(x.a,{className:e.expandedContent,children:[Object(L.jsxs)(O.a,{component:"span",variant:"body1",className:e.inline,color:"textPrimary",children:["For"," ",Object(L.jsxs)("b",{style:{color:"green"},children:[" ","".concat(Object(W.formatUnits)(t.price))," ","\u039e"]}),t.sender&&t.sender.length>0?" x ".concat(t.durationInDays," days"):""]}),Object(L.jsx)(O.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary",children:" At ".concat(new Date(Number(t.timestamp)).toLocaleString())})]})}),Object(L.jsx)(_.a,{variant:"inset",style:{backgroundColor:"black"}})]},t.tokenId)}))})})})]})]})})},a)})),Object(L.jsx)(ae,{open:k})]})}var Ye=n(1323),Ge=n(1320),qe=n(1327),Ve=n(623),Je=n.n(Ve),Ke=n(104),$e=Object(p.a)((function(e){return Object(m.a)({container:{textAlign:"center",justifyContent:"center"},text:{wordWrap:"break-word",textDecorationColor:"default",textAlign:"center"},title:{textAlign:"center"},button:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},uploadButton:{marginTop:e.spacing(1),marginBottom:e.spacing(1),width:"80%",height:"50vh"},input:{display:"none"},imagePreviewContainer:{width:"100%"},image:{width:"80%",pointerEvents:"none",marginBottom:e.spacing(2)},authContent:{textAlign:"center",margin:e.spacing(2)},checkboxes:{display:"flex",flexDirection:"column"}})}));function Qe(){var e=$e(),t=r.a.useState(""),n=Object(u.a)(t,2),a=n[0],i=n[1],s=r.a.useState(""),c=Object(u.a)(s,2),p=c[0],m=c[1],b=r.a.useState(""),j=Object(u.a)(b,2),f=j[0],h=j[1],g=r.a.useState(""),y=Object(u.a)(g,2),N=y[0],w=y[1],k=r.a.useState(""),T=Object(u.a)(k,2),C=T[0],I=T[1],P=r.a.useState(""),S=Object(u.a)(P,2),A=S[0],B=S[1],F=re(),E=Object(u.a)(F,3),M=E[0],D=E[1],_=E[2],W=r.a.useState(),z=Object(u.a)(W,2),G=z[0],q=z[1],V=r.a.useState(),J=Object(u.a)(V,2),K=J[0],$=J[1],Q=r.a.useState({first:!1,second:!1,third:!1}),X=Object(u.a)(Q,2),Z=X[0],ee=X[1],te=Object(R.g)(),ne=r.a.useContext(U).mintNFT,ie=function(e){ee(Object(l.a)(Object(l.a)({},Z),{},Object(H.a)({},e.target.name,e.target.checked)))},se=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(),t=Number(Object(Ke.parseUnits)(C,18)).toString(),n=Number(Object(Ke.parseUnits)(A,18)).toString(),e.next=5,ne({title:a,description:p,creator:f,year:N,image:K,sellingPrice:t,dailyLicensePrice:n});case 5:_(),te.replace("/market");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(Y,{className:e.container,maxWidth:"md",children:[Object(L.jsx)(O.a,{variant:"h5",component:"h1",className:e.title,children:"MINT YOUR NFT"}),Object(L.jsxs)(x.a,{className:e.imagePreviewContainer,children:[G?Object(L.jsx)("img",{src:G,className:e.image,alt:""}):Object(L.jsxs)(v.a,{variant:"outlined",color:"inherit",className:e.uploadButton,startIcon:Object(L.jsx)(Je.a,{}),component:"label",children:["Upload Image",Object(L.jsx)("input",{accept:"image/*",className:e.input,id:"upload-button",type:"file",onChange:function(e){e.preventDefault();var t=e.target.files[0];q(URL.createObjectURL(t));var n=new window.FileReader;n.readAsArrayBuffer(t),n.onloadend=function(){$(n.result)}},hidden:!0})]}),a?Object(L.jsx)(O.a,{variant:"body1",className:e.text,children:Object(L.jsxs)("b",{children:[a," (",N,")"]})}):null,Object(L.jsx)(O.a,{variant:"body2",className:e.text,children:Object(L.jsx)("i",{children:p})}),f?Object(L.jsxs)(O.a,{variant:"body2",children:["\xa9 ",f]}):null]}),Object(L.jsx)(Ye.a,{value:a,onChange:function(e){return i(e.target.value)},margin:"dense",label:"Title",disabled:!G}),Object(L.jsx)(Ye.a,{value:p,onChange:function(e){return m(e.target.value)},margin:"dense",label:"Description",disabled:!G}),Object(L.jsx)(Ye.a,{value:f,onChange:function(e){return h(e.target.value)},margin:"dense",label:"Original Creator",disabled:!G}),Object(L.jsx)(Ye.a,{type:"number",value:N,onChange:function(e){return w(e.target.value)},margin:"dense",label:"Year",disabled:!G}),Object(L.jsx)(Ye.a,{value:C,onChange:function(e){return I(e.target.value)},margin:"dense",label:"Selling Price (\u039e)",placeholder:"0.1",disabled:!G}),Object(L.jsx)(Ye.a,{value:A,onChange:function(e){return B(e.target.value)},margin:"dense",label:"Daily License Price (\u039e)",placeholder:"0.001",disabled:!G}),Object(L.jsx)(x.a,{className:e.authContent,children:Object(L.jsxs)(x.a,{className:e.checkboxes,children:[Object(L.jsx)(Ge.a,{control:Object(L.jsx)(qe.a,{checked:Z.first,onChange:ie,name:"first",color:"default"}),label:Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body1",className:e.text,children:"This artwork is original and does not contain any copyrighted or restricted imagery or audio"})}),Object(L.jsx)(Ge.a,{control:Object(L.jsx)(qe.a,{checked:Z.second,onChange:ie,name:"second",color:"default"}),label:Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body1",className:e.text,children:"This artwork is not and will not be tokenized or available for digital purchase elsewhere"})}),Object(L.jsx)(Ge.a,{control:Object(L.jsx)(qe.a,{checked:Z.third,onChange:ie,name:"third",color:"default"}),label:Object(L.jsxs)(O.a,{variant:"body1",className:e.text,children:["I agree to the"," ",Object(L.jsx)(v.a,{variant:"text",color:"primary",children:Object(L.jsx)("u",{children:"Terms of Service"})})]})}),Object(L.jsx)(v.a,{className:e.button,onClick:se,variant:"outlined",color:"inherit",disabled:!(C&&A&&Z.first&&Z.second&&Z.third),children:"Tokenize"}),Object(L.jsx)(v.a,{className:e.button,onClick:function(){i(""),m(""),w(""),h(""),I(""),B(""),q(null),$(null),ee({first:!1,second:!1,third:!1})},variant:"outlined",disabled:!G,children:"Cancel"})]})}),Object(L.jsx)(ae,{open:M})]})}var Xe=n(383),Ze=n(181),et=n(268),tt=n(387),nt=n(388),at=n.n(nt),rt=n(1319),it=n(1332),st=n(1326),ct=n(1333),ot=n(37),lt=T()((function(e){return w()({container:{alignItems:"center",width:"100%"},image:{width:"100%",pointerEvents:"none",marginBottom:e.spacing(1)},divider:{backgroundColor:"black",width:"95%"},emptyListBox:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",paddingBottom:e.spacing(8)},emptyListText:{color:e.palette.text.hint},purchaseTitle:{marginTop:e.spacing(1)},formGroup:{width:"100%"},formControl:{alignItems:"center",width:"100%"},formControlLabel:{border:"1px solid black",padding:e.spacing(1),marginBottom:e.spacing(1),marginLeft:e.spacing(2)},labelBox:{textAlign:"center",width:"100%",marginLeft:e.spacing(3)},button:{width:"95%",padding:e.spacing(2)},cardText:{textAlign:"left"}})}));function dt(){var e=lt(),t=r.a.useState(),n=Object(u.a)(t,2),a=n[0],i=n[1],s=re(),c=Object(u.a)(s,3),l=c[0],p=void 0===l||l,m=c[1],b=c[2],j=re(),f=Object(u.a)(j,3),h=f[0],g=f[1],y=f[2],N=re(),w=Object(u.a)(N,3),k=w[0],T=w[1],C=w[2],I=r.a.useState(1),P=Object(u.a)(I,2),S=P[0],A=P[1],B=r.a.useState(!1),F=Object(u.a)(B,2),E=F[0],M=F[1],D=Object(R.i)().id,H=Object(R.g)(),z=r.a.useContext(U),G=z._signerAddress,q=z.buyNFT,V=z.buyLicense,J=z.getLicensePurchasedEventsForNFT;r.a.useEffect((function(){m(),i(z._nfts.find((function(e){return Number(e.id)===Number(D)})))}),[z._nfts.length>0]),r.a.useEffect((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,J(Number(a.id));case 3:t=e.sent,(n=t.filter((function(e){return e.sender===G}))).length>0?M(n.filter((function(e){return Number(e.endDateInMillis)-(new Date).getTime()})).length>0):M(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),b()}),[a,z._signerAddress]);var K=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(),!a||!h){e.next=8;break}return e.next=4,q({id:D,txValue:ot.a.from(a.sellingPrice)});case 4:b(),H.replace("/collection/".concat(a.id)),e.next=15;break;case 8:if(!a||!k){e.next=15;break}return t=ot.a.from(S),n=ot.a.from(a.dailyLicensePrice),e.next=13,V({id:D,days:S,txValue:n.mul(t)});case 13:b(),H.replace("/licenses");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(Y,{className:e.container,maxWidth:"md",children:[a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("a",{target:"blank",href:"".concat(a.metadata.image),children:Object(L.jsx)("img",{src:a.metadata.image,className:e.image,alt:""})}),Object(L.jsx)(O.a,{variant:"h4",component:"h1",children:a.metadata.title}),Object(L.jsx)(O.a,{variant:"body1",component:"p",gutterBottom:!0,children:a.metadata.description}),Object(L.jsx)(_.a,{className:e.divider}),Object(L.jsx)(x.a,{style:{marginBottom:"8px",width:"100%"},children:Object(L.jsx)(Z,{artist:a.artist,owner:a.owner})}),a.owner!==G&&Object(L.jsxs)(rt.a,{component:"fieldset",className:e.formControl,children:[Object(L.jsxs)(it.a,{"aria-label":"position",name:"position",defaultValue:"top",className:e.formGroup,children:[Number(a.sellingPrice)>0&&Object(L.jsx)(Ge.a,{value:"value1",control:Object(L.jsx)(st.a,{color:"primary",onClick:function(){g(),C(),A(1)}}),className:e.formControlLabel,label:Object(L.jsxs)(x.a,{className:e.labelBox,children:[Object(L.jsx)(O.a,{variant:"body1",component:"h6",className:e.purchaseTitle,children:Object(L.jsx)("b",{children:"BUY NFT "})}),Object(L.jsxs)(O.a,{variant:"body1",component:"p",children:["Price "," ",Object(L.jsxs)("b",{children:[Number(Object(W.formatUnits)(a.sellingPrice.toString()))," ","\u039e"]})]}),Object(L.jsx)(O.a,{variant:"body1",component:"p",color:"textSecondary",children:"7% resale fee for the artist"})]})}),Number(a.dailyLicensePrice)>0&&!E&&Object(L.jsx)(Ge.a,{value:"value2",control:Object(L.jsx)(st.a,{color:"primary",onClick:function(){T(),y()}}),className:e.formControlLabel,label:Object(L.jsxs)(x.a,{className:e.labelBox,children:[Object(L.jsx)(O.a,{variant:"body1",component:"h6",className:e.purchaseTitle,children:Object(L.jsx)("b",{children:"GET A LICENSE"})}),Object(L.jsxs)(O.a,{variant:"body1",component:"p",children:["Price (daily) "," ",Object(L.jsxs)("b",{children:[Number(Object(W.formatUnits)(a.dailyLicensePrice.toString()))," ","\u039e"]})]}),Object(L.jsx)(O.a,{variant:"body1",component:"p",color:"textSecondary",gutterBottom:!0,children:"3% resale fee for the artist"}),Object(L.jsx)(ct.a,{defaultValue:1,step:1,min:1,max:90,value:S,onChange:function(e,t){A("number"===typeof t?t:1)},disabled:!k,valueLabelDisplay:"auto","aria-labelledby":"discrete-slider-custom"}),Object(L.jsxs)(O.a,{variant:"body2",component:"p",color:"textSecondary",gutterBottom:!0,children:["License expiration in "," ",S," "," days"]})]})})]}),(0!==Number(a.sellingPrice)||0!==Number(a.dailyLicensePrice)&&E)&&Object(L.jsxs)(v.a,{variant:"outlined",color:"inherit",className:e.button,disabled:!h&&!k,onClick:K,children:[h&&"BUY NFT",k&&"BUY LICENSE FOR ".concat((Number(Object(W.formatUnits)(a.dailyLicensePrice.toString()))*S).toString().substr(0,6)," \u039e"),h||k?"":"..."]})]})]}),!a&&Object(L.jsxs)(x.a,{className:e.emptyListBox,children:[Object(L.jsx)(O.a,{className:e.emptyListText,variant:"h4",children:"No NFT!"}),Object(L.jsx)(O.a,{className:e.emptyListText,variant:"subtitle1",children:"Wrong identifier (".concat(D,")")})]}),Object(L.jsx)(ae,{open:p})]})}var ut=n(627),pt=n.n(ut),mt=n(389),bt=n.n(mt),jt=n(628),xt=n.n(jt),ft=n(624),ht=n.n(ft);function gt(e){return yt.apply(this,arguments)}function yt(){return(yt=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht.a.post("http://localhost:8080/detect",{ipfsCID:t});case 3:if(200!==(n=e.sent).status||!n.data){e.next=6;break}return e.abrupt("return",n.data);case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Ot=n(625),vt=n.n(Ot),Nt=n(626),wt=n.n(Nt),kt=Object(p.a)((function(e){return Object(m.a)({iprBox:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",textAlign:"center",marginTop:e.spacing(1)},iprReportText:{display:"flex",alignItems:"center"},icon:{padding:e.spacing(1)},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},list:{width:"100%",maxWidth:"90%",backgroundColor:e.palette.background.paper,padding:0},inline:{display:"inline"},expandedContent:{display:"flex",flex:1,flexDirection:"column"},imageLinkIcon:{color:e.palette.primary.main},sourceLocation:{color:e.palette.secondary.main}})}));function Tt(){var e=kt(),t=J(),n=Object(R.g)(),a=r.a.useState(new Map),i=Object(u.a)(a,2),s=i[0],c=i[1],l=r.a.useState(new Map),p=Object(u.a)(l,2),m=p[0],b=p[1],j=r.a.useState(new Map),f=Object(u.a)(j,2),h=f[0],y=f[1],v=re(),N=Object(u.a)(v,3),w=N[0],k=void 0===w||w,T=N[1],C=N[2],I=r.a.useState([]),P=Object(u.a)(I,2),S=P[0],A=P[1],B=r.a.useContext(U),z=B._nfts,Y=B._signerAddress,G=B.getInfringmentAttemptsRecordedEventForNFT,q=B.recordIPRInfringementAttempts,K=function(){var e=Object(d.a)(o.a.mark((function e(t){var n,a,r,i,l,d,u,p,j,x,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z.length>0)){e.next=44;break}if(n=s,a=m,r=h,i=S,(l=z[t]).owner!==Y){e.next=39;break}return e.next=9,gt(l.metadata.image);case 9:if(!(d=e.sent)||!d.pagesWithMatchingImages){e.next=39;break}return n.set(Number(l.id),d.pagesWithMatchingImages),u="0x"+vt.a.createHash("sha256").update(JSON.stringify(d.pagesWithMatchingImages)).digest("hex"),e.next=15,G(Number(l.id));case 15:if(!((p=e.sent).length>0)){e.next=32;break}if((j=p[p.length-1]).infringmentAttemptsHash===u){e.next=27;break}return x=Date.now(),e.next=22,q({tokenId:Number(l.id),timestamp:x,totalAttempts:d.pagesWithMatchingImages.length,infringmentAttemptsHash:u});case 22:a.set(Number(l.id),x),r.set(Number(l.id),d.pagesWithMatchingImages.length),i[l.id]=!0,e.next=30;break;case 27:a.set(Number(l.id),Number(j.timestamp)),r.set(Number(l.id),d.pagesWithMatchingImages.length),i[l.id]=!0;case 30:e.next=39;break;case 32:if(!d.pagesWithMatchingImages){e.next=39;break}return f=Date.now(),e.next=36,q({tokenId:Number(l.id),timestamp:f,totalAttempts:d.pagesWithMatchingImages.length,infringmentAttemptsHash:u});case 36:a.set(Number(l.id),f),r.set(Number(l.id),d.pagesWithMatchingImages.length),i[l.id]=!0;case 39:c(n),b(a),y(r),A(i),C();case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){T(),K(e.target.id)};r.a.useEffect((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,a,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Map,n=new Map,a=[],r=0;case 4:if(!(r<z.length)){e.next=14;break}if(z[r].owner!==Y){e.next=11;break}return e.next=8,G(Number(z[r].id));case 8:(i=e.sent).length>0&&(s=i[i.length-1],t.set(Number(z[r].id),Number(s.timestamp)),n.set(Number(z[r].id),Number(s.totalAttempts))),a.push(!1);case 11:r++,e.next=4;break;case 14:b(t),y(n),A(a);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[z]);var Q=function(e){var t=Object(Fe.a)(S),n=t[e.target.id];n=!n,t[e.target.id]=n,A(t)};return Object(L.jsxs)(V,{pageTitle:"YOUR COLLECTION",errorMessage:"There are no NFTs you own yet!",filteredNFTs:z.length>0?z.filter((function(e){return e.owner===Y})):[],children:[z.length>0&&z.sort((function(e,t){return e.id-t.id})).filter((function(e){return e.owner===Y})).map((function(a,r){return Object(L.jsx)(x.a,{className:t.cardsBox,children:Object(L.jsx)(F.a,{className:t.card,children:Object(L.jsxs)(E.a,{children:[Object(L.jsx)(M.a,{component:"img",alt:a.metadata.title,image:a.metadata.image,title:a.metadata.title,className:t.cardImage,onClick:function(){return n.push("/collection/".concat(a.id))}}),Object(L.jsxs)(D.a,{className:t.cardContent,children:[Object(L.jsxs)(x.a,{onClick:function(){return n.push("/collection/".concat(a.id))},children:[Object(L.jsx)(O.a,{variant:"h5",component:"h2",className:t.cardText,children:a.metadata.title}),Object(L.jsxs)(O.a,{variant:"h6",component:"h3",className:t.cardText,style:{color:"green"},children:[Number(Object(W.formatUnits)(a.sellingPrice.toString()))," ","\u039e"," ","/"," ",Number(Object(W.formatUnits)(a.dailyLicensePrice.toString()))," ","\u039e"]}),Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body2",className:t.cardText,color:"textSecondary",style:{padding:0,fontSize:"0.8rem"},children:Object(L.jsx)("i",{children:"List price / Daily license price"})})]}),m.get(Number(a.id))?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(_.a,{style:{backgroundColor:"black"}}),Object(L.jsxs)(x.a,{className:e.iprBox,children:[Object(L.jsxs)(x.a,{children:[Object(L.jsxs)(O.a,{variant:"body1",component:"h3",className:e.iprReportText,style:{color:h.get(Number(a.id))>0?"darkred":"darkgreen"},children:[Object(L.jsx)(pt.a,{className:e.icon})," ",h.get(Number(a.id))," IPR Infringement Attempts"]}),Object(L.jsx)(O.a,{gutterBottom:!0,variant:"body2",className:t.cardText,color:"textSecondary",style:{marginLeft:"8px",fontSize:"0.8rem"},children:Object(L.jsx)("i",{children:m.get(Number(a.id))?new Date(m.get(Number(a.id))).toLocaleString():""})})]}),Object(L.jsx)(g.a,{onClick:$,style:{padding:0},children:Object(L.jsx)(bt.a,{id:r.toString(),className:e.icon})})]}),Object(L.jsx)(g.a,{className:Object(Re.a)(e.expand,Object(H.a)({},e.expandOpen,S[r])),onClick:Q,"aria-expanded":S[r],"aria-label":"show more",disabled:!s.get(Number(a.id)),children:Object(L.jsx)(_e.a,{id:r.toString()})})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(_.a,{style:{backgroundColor:"black"}}),Object(L.jsxs)(x.a,{className:e.iprBox,children:[Object(L.jsx)(x.a,{children:Object(L.jsxs)(O.a,{variant:"body1",component:"h3",className:e.iprReportText,style:{marginLeft:"8px"},children:[Object(L.jsx)(wt.a,{style:{marginRight:"8px"}})," "," No detection executed!"]})}),Object(L.jsx)(g.a,{onClick:$,style:{padding:0},children:Object(L.jsx)(bt.a,{id:r.toString(),className:e.icon})})]}),Object(L.jsx)(g.a,{className:Object(Re.a)(e.expand,Object(H.a)({},e.expandOpen,S[r])),onClick:Q,"aria-expanded":S[r],"aria-label":"show more",disabled:!m.get(Number(a.id)),children:Object(L.jsx)(_e.a,{id:r.toString()})})]}),Object(L.jsx)(Ee.a,{in:S[r],timeout:"auto",unmountOnExit:!0,children:Object(L.jsx)(D.a,{children:Object(L.jsx)(ge.a,{className:e.list,children:s.get(Number(a.id))&&Object(Fe.a)(s.get(Number(a.id))).map((function(t,n){return Object(L.jsx)(x.a,{children:Object(L.jsx)(ye.a,{alignItems:"center",style:{padding:0,margin:0},children:Object(L.jsx)(ve.a,{style:{minWidth:"100%",marginLeft:"16px"},primary:Object(L.jsxs)(x.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(L.jsx)(O.a,{component:"span",variant:"h6",className:e.inline,color:"textPrimary",children:"Attempt #".concat(n+1)}),Object(L.jsx)("a",{href:"".concat(t.fullMatchingImages.length>0?t.fullMatchingImages[0].url:t.partialMatchingImages[0].url),target:"blank",style:{alignItems:"center",display:"flex"},children:Object(L.jsx)(xt.a,{className:e.imageLinkIcon})})]}),secondary:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(x.a,{style:{width:"90%"},children:Object(L.jsxs)(O.a,{component:"span",variant:"body1",className:e.inline,color:"textSecondary",children:["Source: ",Object(L.jsx)("b",{children:Object(L.jsx)("a",{className:e.sourceLocation,href:t.url,target:"blank",children:t.url.split("/")[2]})})]})}),Object(L.jsx)(_.a,{style:{backgroundColor:"black",marginTop:"8px"}})]})})})},n)}))})})})]})]})})},r)})),Object(L.jsx)(ae,{open:k})]})}var Ct=T()((function(e){return w()({container:{alignItems:"center",width:"100%"},image:{width:"100%",pointerEvents:"none",marginBottom:e.spacing(1)},divider:{backgroundColor:"black",width:"95%"},emptyListBox:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",paddingBottom:e.spacing(8)},emptyListText:{color:e.palette.text.hint},priceContainerBox:{width:"95%",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:e.spacing(1)},priceTitle:{marginTop:e.spacing(1)},ownershipContentBox:{display:"flex",flexDirection:"row",padding:e.spacing(1)},ownershipText:{display:"flex",flexDirection:"column"},avatar:{backgroundColor:"transparent",padding:e.spacing(1)},formGroup:{width:"100%"},formControl:{alignItems:"center",width:"100%"},formControlLabel:{border:"1px solid black",padding:e.spacing(1),marginBottom:e.spacing(1),marginLeft:e.spacing(2)},labelBox:{textAlign:"center",width:"100%",marginLeft:e.spacing(3)},button:{width:"95%",padding:e.spacing(2)}})}));function Lt(){var e=Ct(),t=r.a.useState(),n=Object(u.a)(t,2),a=n[0],i=n[1],s=r.a.useState(""),c=Object(u.a)(s,2),l=c[0],p=c[1],m=r.a.useState(""),b=Object(u.a)(m,2),j=b[0],f=b[1],h=re(),g=Object(u.a)(h,3),y=g[0],N=void 0===y||y,w=g[1],k=g[2],T=re(),C=Object(u.a)(T,3),I=C[0],P=C[1],S=C[2],A=re(),B=Object(u.a)(A,3),F=B[0],E=B[1],M=B[2],D=Object(R.i)().id,H=r.a.useContext(U),z=H._signerAddress,G=H.updateSellingPrice,q=H.updateDailyLicensePrice;r.a.useEffect((function(){w(),i(H._nfts.find((function(e){return Number(e.id)===Number(D)}))),k()}),[H._nfts]);var V=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(),!(a&&I&&Number(a.sellingPrice)>=0)){e.next=8;break}return t=Number(Object(W.parseUnits)(l,18)).toString(),e.next=5,G({tokenId:a.id,newSellingPrice:t});case 5:k(),e.next=13;break;case 8:if(!(a&&F&&Number(a.dailyLicensePrice)>=0)){e.next=13;break}return n=Number(Object(W.parseUnits)(j,18)).toString(),e.next=12,q({tokenId:a.id,newDailyLicensePrice:n});case 12:k();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(Y,{className:e.container,maxWidth:"md",children:[a&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("a",{target:"blank",href:"".concat(a.metadata.image),children:Object(L.jsx)("img",{src:a.metadata.image,className:e.image,alt:""})}),Object(L.jsx)(O.a,{variant:"h4",component:"h1",children:a.metadata.title}),Object(L.jsx)(O.a,{variant:"body1",component:"p",gutterBottom:!0,children:a.metadata.description}),Object(L.jsx)(_.a,{className:e.divider}),Object(L.jsxs)(x.a,{className:e.priceContainerBox,children:[Object(L.jsxs)(x.a,{className:e.ownershipText,children:[Object(L.jsx)(O.a,{variant:"body1",component:"p",color:"textSecondary",children:"SELLING PRICE"}),Object(L.jsx)(O.a,{variant:a.sellingPrice>0?"h6":"body2",component:"p",style:{textAlign:"center",color:a.sellingPrice>0?"green":"red"},children:Object(L.jsx)("b",{children:a.sellingPrice>0?"".concat(Number(Object(W.formatUnits)(a.sellingPrice.toString()))," \u039e"):"NOT FOR SALE"})})]}),Object(L.jsxs)(x.a,{className:e.ownershipText,children:[Object(L.jsx)(O.a,{variant:"body1",component:"p",color:"textSecondary",children:"DAILY LICENSE PRICE"}),Object(L.jsx)(O.a,{variant:a.dailyLicensePrice>0?"body1":"body2",component:"p",style:{textAlign:"center",color:a.dailyLicensePrice>0?"green":"red"},children:Object(L.jsx)("b",{children:a.dailyLicensePrice>0?"".concat(Number(Object(W.formatUnits)(a.dailyLicensePrice.toString()))," \u039e"):"NOT LICENSABLE"})})]})]}),a.owner===z&&Object(L.jsxs)(rt.a,{component:"fieldset",className:e.formControl,children:[Object(L.jsxs)(it.a,{"aria-label":"position",name:"position",defaultValue:"top",className:e.formGroup,children:[Object(L.jsx)(Ge.a,{value:"value1",control:Object(L.jsx)(st.a,{color:"primary",onClick:function(){P(),M(),f("")}}),className:e.formControlLabel,label:Object(L.jsxs)(x.a,{className:e.labelBox,children:[Object(L.jsx)(O.a,{variant:"body1",component:"h6",className:e.priceTitle,children:Object(L.jsx)("b",{children:Number(a.sellingPrice)>0?"CHANGE PRICE":"SELL"})}),Object(L.jsx)(Ye.a,{type:"number",value:l,onChange:function(e){return p(e.target.value)},margin:"dense",label:"Price (\u039e)",placeholder:"0.1",disabled:!I}),Object(L.jsx)(O.a,{variant:"body1",component:"p",color:"textSecondary",children:"7% resale fee for the artist"})]})}),Object(L.jsx)(Ge.a,{value:"value2",control:Object(L.jsx)(st.a,{color:"primary",onClick:function(){E(),S(),p("")}}),className:e.formControlLabel,label:Object(L.jsxs)(x.a,{className:e.labelBox,children:[Object(L.jsx)(O.a,{variant:"body1",component:"h6",className:e.priceTitle,children:Object(L.jsx)("b",{children:Number(a.dailyLicensePrice)>0?"UPDATE LICENSE FEE":"MAKE LICENSABLE"})}),Object(L.jsx)(Ye.a,{type:"number",value:j,onChange:function(e){return f(e.target.value)},margin:"dense",label:"Daily Fee (\u039e)",placeholder:"0.1",disabled:!F}),Object(L.jsx)(O.a,{variant:"body1",component:"p",color:"textSecondary",gutterBottom:!0,children:"3% resale fee for the artist"})]})})]}),Object(L.jsxs)(v.a,{variant:"outlined",color:"inherit",className:e.button,disabled:!I&&!F||!l&&!j||I&&Number(l)<=0&&0===Number(a.sellingPrice)||Number(a.sellingPrice)>0&&Number(l)<0||F&&Number(j)<=0&&0===Number(a.dailyLicensePrice)||Number(a.dailyLicensePrice)>0&&Number(j)<0,onClick:V,children:[I&&Number(a.sellingPrice)>0&&0===Number(l)&&"REMOVE FROM SALE",F&&Number(a.dailyLicensePrice)>0&&0===Number(j)&&"REMOVE FROM LICENSING",I&&0===Number(a.sellingPrice)&&Number(l)>0&&"PUT ON SALE",F&&0===Number(a.dailyLicensePrice)&&Number(j)>0&&"PUT ON LICENSE",I&&Number(a.sellingPrice)>0&&Number(l)>0&&"CHANGE SALE PRICE",F&&Number(a.dailyLicensePrice)>0&&Number(j)>0&&"CHANGE LICENSE PRICE",!I&&!F||I&&Number(l)<=0||F&&Number(j)<=0?"...":""]})]})]}),!a&&Object(L.jsxs)(x.a,{className:e.emptyListBox,children:[Object(L.jsx)(O.a,{className:e.emptyListText,variant:"h4",children:"No NFT!"}),Object(L.jsx)(O.a,{className:e.emptyListText,variant:"subtitle1",children:"Wrong identifier (".concat(D,")")})]}),Object(L.jsx)(ae,{open:N})]})}var It=T()((function(e){return w()({emptyListBox:{display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",paddingBottom:e.spacing(8),height:"80vh"},emptyListText:{color:e.palette.text.hint},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},list:{width:"100%",maxWidth:"90%",backgroundColor:e.palette.background.paper,padding:0},inline:{display:"inline"},expandedContent:{display:"flex",flex:1,flexDirection:"column"},valid:{backgroundColor:"green"},invalid:{backgroundColor:"red"}})}));function Pt(){var e=It(),t=J(),n=r.a.useState(new Map),a=Object(u.a)(n,2),i=a[0],s=a[1],c=re(),l=Object(u.a)(c,3),p=l[0],m=l[1],b=l[2],j=re(),f=Object(u.a)(j,3),h=f[0],y=void 0===h||h,v=f[1],N=f[2],w=r.a.useContext(U),k=w._nfts,T=w._signerAddress,C=w.getLicensePurchasedEventsForNFT;return r.a.useEffect((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Map,n=0;case 2:if(!(n<k.length)){e.next=11;break}return e.next=5,C(Number(k[n].id));case 5:a=e.sent,(r=a.filter((function(e){return e.sender===T}))).length>0&&t.set(Number(k[n].id),r);case 8:n++,e.next=2;break;case 11:s(t),N();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();v(),e()}),[k]),Object(L.jsxs)(V,{pageTitle:"LICENSES",errorMessage:"There are no NFTs where to buy licenses from!",filteredNFTs:k.length>0?k:[],children:[k&&k.filter((function(e){return!!i.get(Number(e.id))})).length>0?k.sort((function(e,t){return e.id-t.id})).filter((function(e){return!!i.get(Number(e.id))})).map((function(n,a){var r;return Object(L.jsx)(L.Fragment,{children:i.get(Number(n.id))?Object(L.jsx)(x.a,{className:t.cardsBox,children:Object(L.jsx)(F.a,{className:t.card,children:Object(L.jsxs)(E.a,{children:[Object(L.jsx)(M.a,{component:"img",alt:n.metadata.title,image:n.metadata.image,title:n.metadata.title,className:t.cardImage}),Object(L.jsxs)(D.a,{className:t.cardContent,children:[Object(L.jsxs)(x.a,{children:[Object(L.jsx)(O.a,{variant:"h5",component:"h2",children:n.metadata.title}),Object(L.jsx)(O.a,{variant:"body1",component:"p",gutterBottom:!0,children:n.metadata.description})]}),Object(L.jsx)(g.a,{className:Object(Re.a)(e.expand,Object(H.a)({},e.expandOpen,p)),onClick:p?b:m,"aria-expanded":p,"aria-label":"show more",disabled:!(null===(r=i.get(Number(n.id)))||void 0===r?void 0:r.length),children:Object(L.jsx)(_e.a,{})}),Object(L.jsx)(Ee.a,{in:p,timeout:"auto",unmountOnExit:!0,children:Object(L.jsx)(D.a,{children:Object(L.jsx)(ge.a,{className:e.list,children:i.get(Number(n.id))&&Object(Fe.a)(i.get(Number(n.id))).sort((function(e,t){return t.timestamp-e.timestamp})).map((function(t,n){return Object(L.jsx)(x.a,{children:Object(L.jsxs)(ye.a,{alignItems:"center",children:[Object(L.jsx)(Me.a,{children:Object(L.jsx)(K.a,{className:Number(t.endDateInMillis)-Number(t.timestamp)>0?e.valid:e.invalid,children:Number(t.endDateInMillis)-Number(t.timestamp)>0?(Number(t.endDateInMillis)-Number(t.timestamp))/864e5:0})}),Object(L.jsx)(ve.a,{style:{minWidth:"90%",marginLeft:"16px"},primary:Object(L.jsxs)(x.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(L.jsx)(O.a,{component:"span",variant:"h6",className:e.inline,color:"textPrimary",children:"License #".concat(n+1)}),Object(L.jsx)("a",{href:"https://ropsten.etherscan.io/tx/".concat(t.txHash),target:"blank",style:{alignItems:"center",display:"flex"},children:Object(L.jsx)(We.a,{style:{color:"green",fontSize:"1.2rem"}})})]}),secondary:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(O.a,{component:"span",variant:"body1",className:e.inline,color:"textPrimary",children:["Price"," ",Object(L.jsxs)("b",{style:{color:"green"},children:[" ","".concat(Object(W.formatUnits)(t.price))," ","\u039e"]}),Object(L.jsx)("br",{})]}),Object(L.jsxs)(O.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary",gutterBottom:!0,children:["Expiry ".concat(new Date(Number(t.endDateInMillis)).toLocaleString()),Object(L.jsx)("br",{})]}),Object(L.jsx)(O.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary"})]})}),Object(L.jsx)(_.a,{variant:"inset",style:{backgroundColor:"black"}})]})},n)}))})})})]})]})})},a):Object(L.jsxs)(x.a,{className:e.emptyListBox,children:[Object(L.jsx)(O.a,{className:e.emptyListText,variant:"h4",children:"No Licenses!"}),Object(L.jsx)(O.a,{className:e.emptyListText,variant:"subtitle1",children:"Buy your license from the market!"})]})})})):Object(L.jsxs)(x.a,{className:e.emptyListBox,children:[Object(L.jsx)(O.a,{className:e.emptyListText,variant:"h4",children:"No Licenses!"}),Object(L.jsx)(O.a,{className:e.emptyListText,variant:"subtitle1",children:"There are no NFTs where to purchase a license from!"})]}),Object(L.jsx)(ae,{open:y})]})}var St=n(629),At=n.n(St),Bt=Object(p.a)((function(e){return Object(m.a)({container:{display:"flex",flexDirection:"column",minHeight:"100vh",flex:1},leftAppBarButton:{marginRight:e.spacing(2)},placeholder:{flexGrow:1}})}));var Ft=function(){var e=Bt(),t=r.a.useState(void 0),n=Object(u.a)(t,2),a=n[0],i=n[1],s=re(),c=Object(u.a)(s,3),p=c[0],m=c[1],y=c[2],O=Object(R.h)(),v=Object(R.g)(),N=function(){var e=localStorage.getItem("theme-type"),t=r.a.useState(e||"light"),n=Object(u.a)(t,2),a=n[0],i=n[1];return{_theme:r.a.useMemo((function(){return Object(oe.a)({palette:{type:a,primary:{main:"light"===a?"#14110F":"#F4F4F9"},secondary:{main:"light"===a?"#2B50AA":"#266DD3"},background:{paper:"light"===a?"#F4F4F9":"#34312D"}}})}),[a]),toggleTheme:function(){var e="dark"===a?"light":"dark";localStorage.setItem("theme-type",e),i(e)}}}(),w=N._theme,k=N.toggleTheme,T=Object(le.a)(a),C=a?a.signer:void 0,I=function(){var e=Object(d.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return t=a.injectedProvider,n=a.provider,e.next=4,t.request({method:"eth_requestAccounts"});case 4:return e.t0=i,e.t1=l.a,e.t2=Object(l.a)({},a),e.t3={},e.t4=n,e.next=11,n.listAccounts();case 11:e.t5=e.sent[0],e.t6=e.t4.getSigner.call(e.t4,e.t5),e.t7={signer:e.t6},e.t8=(0,e.t1)(e.t2,e.t3,e.t7),(0,e.t0)(e.t8);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Object(d.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"eth_accounts"});case 2:return n=new Xe.a.providers.Web3Provider(t),e.t0=n,e.next=6,n.listAccounts();case 6:return e.t1=e.sent[0],a=e.t0.getSigner.call(e.t0,e.t1),e.next=10,n.getNetwork();case 10:31337===(r=e.sent).chainId&&i({injectedProvider:t,provider:n,signer:a,marketplaceSigner:new Ze.Wallet("0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80",n),contract:new et.b("0x5FbDB2315678afecb367f032d93F642f64180aa3",tt.a,a),ipfs:new at.a({host:"ipfs.infura.io",port:"5001",protocol:"https"})}),3===r.chainId&&i({injectedProvider:t,provider:n,signer:a,marketplaceSigner:new Ze.Wallet("0x9995130296496ef72267a08dca5b4d0a61f6d57725906619d8f7dd8049edb249",n),contract:new et.b("0x658d0FE25484A52c8B5aA18C05445d50b19B8745",tt.a,a),ipfs:new at.a({host:"0x658d0FE25484A52c8B5aA18C05445d50b19B8745",port:"0x658d0FE25484A52c8B5aA18C05445d50b19B8745",protocol:"0x658d0FE25484A52c8B5aA18C05445d50b19B8745"})});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(e){return a.apply(this,arguments)},e.prev=2,e.next=5,At()();case 5:if(null===(t=e.sent)||void 0===t?void 0:t.isMetaMask){e.next=10;break}throw Error("Do you have multiple wallets installed?");case 10:n(t);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}})()()}),[]),null===a||void 0===a||a.injectedProvider.on("accountsChanged",function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&t[0]!==a.signer._address&&i(Object(l.a)(Object(l.a)({},a),{},{signer:a.provider.getSigner(t[0])}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===a||void 0===a||a.injectedProvider.on("chainChanged",(function(e){window.location.reload()})),Object(L.jsx)(ce.Provider,{value:N,children:Object(L.jsxs)(b.a,{theme:w,children:[Object(L.jsxs)(j.a,{className:e.container,elevation:0,square:!0,children:[void 0!==C&&Object(L.jsx)(U.Provider,{value:T,children:Object(L.jsxs)(x.a,{className:e.container,children:[Object(L.jsx)(f.a,{color:"inherit",elevation:0,position:"static",children:Object(L.jsxs)(h.a,{children:["/market"===O.pathname?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(g.a,{edge:"start",className:e.leftAppBarButton,onClick:m,children:Object(L.jsx)(je.a,{})}),Object(L.jsx)(Be,{open:p,onClose:y})]}):"/"!==O.pathname?Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(g.a,{edge:"start",className:e.leftAppBarButton,onClick:function(){var e=/\d/;e.test(O.pathname)&&O.pathname.includes("/collection/")&&v.replace(C&&C._address?"/collection":"/"),e.test(O.pathname)&&O.pathname.includes("/licenses/")&&v.replace(C&&C._address?"/licenses":"/"),("/collection"===O.pathname||"/artworks"===O.pathname||"/licenses"===O.pathname||"/market/mint"===O.pathname||e.test(O.pathname)&&O.pathname.includes("/market/"))&&v.replace(C&&C._address?"/market":"/")},children:Object(L.jsx)(fe.a,{})})}):null,Object(L.jsx)("div",{className:e.placeholder}),Object(L.jsx)(g.a,{edge:"end",onClick:k,children:"dark"!==w.palette.type?Object(L.jsx)(me.a,{}):Object(L.jsx)(ue.a,{})})]})}),Object(L.jsxs)(R.d,{children:[Object(L.jsx)(R.a,{exact:!0,from:"/DigitalArt-dapp",to:"/"}),Object(L.jsx)(R.b,{path:"/market/mint",children:C._address?Object(L.jsx)(Qe,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/collection/:id",children:C._address?Object(L.jsx)(Lt,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/market/:id",children:C._address?Object(L.jsx)(dt,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/licenses",children:C._address?Object(L.jsx)(Pt,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/collection",children:C._address?Object(L.jsx)(Tt,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/artworks",children:C._address?Object(L.jsx)(ze,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/market",children:C._address?Object(L.jsx)(se,{}):Object(L.jsx)(R.a,{to:{pathname:"/"}})}),Object(L.jsx)(R.b,{path:"/",children:C._address?Object(L.jsx)(R.a,{to:{pathname:"/market"}}):Object(L.jsx)(P,{connect:I})})]})]})}),Object(L.jsx)(P,{})]}),Object(L.jsx)(ae,{open:!C})]})})},Et=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1334)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))},Mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Dt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(1269);s.a.render(Object(L.jsx)(Se.a,{children:Object(L.jsx)(Ft,{})}),document.getElementById("root")),Et(),function(e){if("serviceWorker"in navigator){if(new URL("/DigitalArt-dapp",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/DigitalArt-dapp","/service-worker.js");Mt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Dt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Dt(t,e)}))}}()},223:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m}));var a=n(4),r=n.n(a),i=n(72),s=n(26);function c(e){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,o,l,d,u,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters.TokenMinted(),e.next=3,t.queryFilter(n);case 3:a=e.sent,s=[],c=a.length,o=a.length-1;case 7:if(!(o>=a.length-c)){e.next=32;break}return l=a[o].args,e.next=11,t.idToNFT(l.tokenId);case 11:return d=e.sent,e.next=14,fetch(l.tokenURI);case 14:return u=e.sent,e.t0=l.tokenId,e.t1=d.sellingPrice,e.t2=d.dailyLicensePrice,e.t3=l.tokenURI,e.t4=d.artist,e.t5=d.owner,e.t6=i.a,e.t7={},e.next=25,u.json();case 25:e.t8=e.sent,e.t9=(0,e.t6)(e.t7,e.t8),p={id:e.t0,sellingPrice:e.t1,dailyLicensePrice:e.t2,uri:e.t3,artist:e.t4,owner:e.t5,metadata:e.t9},s.push(p);case 29:o--,e.next=7;break;case 32:return e.abrupt("return",s);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters.TokenPurchased(),e.next=3,t.queryFilter(n);case 3:for(a=e.sent,s=[],c=a.length,o=a.length-1;o>=a.length-c;o--)l=a[o].args,s.push(Object(i.a)(Object(i.a)({},l),{},{txHash:a[o].transactionHash}));return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters.LicensePurchased(),e.next=3,t.queryFilter(n);case 3:for(a=e.sent,s=[],c=a.length,o=a.length-1;o>=a.length-c;o--)l=a[o].args,s.push(Object(i.a)(Object(i.a)({},l),{},{txHash:a[o].transactionHash}));return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(r.a.mark((function e(t){var n,a,s,c,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filters.InfringmentAttemptsRecorded(),e.next=3,t.queryFilter(n);case 3:for(a=e.sent,s=[],c=a.length,o=a.length-1;o>=a.length-c;o--)l=a[o].args,s.push(Object(i.a)(Object(i.a)({},l),{},{txHash:a[o].transactionHash}));return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},224:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return l}));var a=n(4),r=n.n(a),i=n(26);function s(e,t){var n=function(){var e=Object(i.a)(r.a.mark((function e(n,a,i,s,c){var o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s);case 2:return o=e.sent,e.t0=Number(n),e.t1=Number(a),e.t2=Number(i),e.t3=s,e.t4=c,e.t5=c,e.next=11,o.json();case 11:e.t6=e.sent,l={id:e.t0,sellingPrice:e.t1,dailyLicensePrice:e.t2,uri:e.t3,owner:e.t4,artist:e.t5,metadata:e.t6},t(l);case 14:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}();return e.on("TokenMinted",n),e.off.bind(e,"TokenMinted",n)}function c(e,t){var n=function(){var e=Object(i.a)(r.a.mark((function e(n,a,i,s,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n,i);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}();return e.on("TokenPurchased",n),e.off.bind(e,"TokenPurchased",n)}function o(e,t){var n=function(){var e=Object(i.a)(r.a.mark((function e(n,a,i){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n,i);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return e.on("SellingPriceUpdated",n),e.off.bind(e,"SellingPriceUpdated",n)}function l(e,t){var n=function(){var e=Object(i.a)(r.a.mark((function e(n,a,i){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n,i);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return e.on("DailyLicensePriceUpdated",n),e.off.bind(e,"DailyLicensePriceUpdated",n)}},342:function(e,t){},387:function(e){e.exports=JSON.parse('{"a":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"oldDailyLicensePrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newDailyLicensePrice","type":"uint256"}],"name":"DailyLicensePriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalAttempts","type":"uint256"},{"indexed":false,"internalType":"bytes32","name":"infringmentAttemptsHash","type":"bytes32"}],"name":"InfringmentAttemptsRecorded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"durationInDays","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endDateInMillis","type":"uint256"},{"indexed":false,"internalType":"address payable","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"LicensePurchased","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address payable","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"PaymentExecuted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"oldSellingPrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newSellingPrice","type":"uint256"}],"name":"SellingPriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"sellingPrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"dailyLicensePrice","type":"uint256"},{"indexed":false,"internalType":"string","name":"tokenURI","type":"string"},{"indexed":false,"internalType":"address","name":"owner","type":"address"}],"name":"TokenMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"address","name":"oldOwner","type":"address"},{"indexed":false,"internalType":"address","name":"newOwner","type":"address"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"TokenPurchased","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"artistLicenseRoyalty","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"artistResellingRoyalty","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getAllLicensesForToken","outputs":[{"components":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"address","name":"recipient","type":"address"}],"internalType":"struct DigitalArt.License[]","name":"_licenses","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"idToNFT","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"sellingPrice","type":"uint256"},{"internalType":"uint256","name":"dailyLicensePrice","type":"uint256"},{"internalType":"string","name":"uri","type":"string"},{"internalType":"address payable","name":"artist","type":"address"},{"internalType":"address payable","name":"owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_days","type":"uint256"},{"internalType":"uint256","name":"_timestamp","type":"uint256"}],"name":"purchaseLicense","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_timestamp","type":"uint256"}],"name":"purchaseNFT","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_timestamp","type":"uint256"},{"internalType":"uint256","name":"_totalAttempts","type":"uint256"},{"internalType":"bytes32","name":"_infringmentAttemptsHash","type":"bytes32"}],"name":"recordIPRInfringementAttempts","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_tokenURI","type":"string"},{"internalType":"uint256","name":"_sellingPrice","type":"uint256"},{"internalType":"uint256","name":"_dailyLicensePrice","type":"uint256"}],"name":"safeMint","outputs":[{"internalType":"uint256","name":"_newTokenId","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_newDailyLicensePrice","type":"uint256"}],"name":"updateDailyLicensePrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_newSellingPrice","type":"uint256"}],"name":"updateSellingPrice","outputs":[],"stateMutability":"nonpayable","type":"function"}]}')},544:function(e,t){},618:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=n(65),r=n(4),i=n.n(r),s=n(26),c=n(22),o=n(0),l=n.n(o),d=n(223),u=n(224);function p(t){var n=l.a.useState(""),r=Object(c.a)(n,2),o=r[0],p=r[1],m=l.a.useState([]),b=Object(c.a)(m,2),j=b[0],x=b[1];function f(){return(f=Object(s.a)(i.a.mark((function n(a){var r,s,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=13;break}return n.next=3,t.ipfs.add(e.from(a.image));case 3:return r=n.sent,s=JSON.stringify({title:a.title,description:a.description,creator:a.creator,year:a.year,image:"https://ipfs.io/ipfs/".concat(r[0].hash)}),n.next=7,t.ipfs.add(e.from(s));case 7:return c=n.sent,n.next=10,t.contract.connect(t.signer).safeMint("https://ipfs.io/ipfs/".concat(c[0].hash),a.sellingPrice,a.dailyLicensePrice);case 10:return o=n.sent,n.next=13,o.wait();case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return(h=Object(s.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.contract.connect(t.signer).purchaseNFT(n.id,Date.now(),{value:n.txValue});case 3:return a=e.sent,e.next=6,a.wait();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(s.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.contract.connect(t.signer).purchaseLicense(n.id,n.days,Date.now(),{value:n.txValue});case 3:return a=e.sent,e.next=6,a.wait();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(s.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.contract.connect(t.signer).updateSellingPrice(n.tokenId,n.newSellingPrice);case 3:return a=e.sent,e.next=6,a.wait();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(s.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.contract.connect(t.signer).updateDailyLicensePrice(n.tokenId,n.newDailyLicensePrice);case 3:return a=e.sent,e.next=6,a.wait();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(s.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t.contract.connect(t.marketplaceSigner).recordIPRInfringementAttempts(n.tokenId,n.timestamp,n.totalAttempts,n.infringmentAttemptsHash);case 3:return a=e.sent,e.next=6,a.wait();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(s.a)(i.a.mark((function e(n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Object(d.d)(t.contract);case 3:return a=e.sent,r=a.filter((function(e){return Number(e.tokenId)===n})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(s.a)(i.a.mark((function e(n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Object(d.b)(t.contract);case 3:return a=e.sent,r=a.filter((function(e){return Number(e.tokenId)===n})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(s.a)(i.a.mark((function e(n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Object(d.a)(t.contract);case 3:return a=e.sent,r=a.filter((function(e){return Number(e.tokenId)===n})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return l.a.useEffect((function(){Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.signer._address)){e.next=6;break}return p(t.signer._address),e.next=4,Object(d.c)(t.contract);case 4:(n=e.sent).length>0&&x(n);case 6:case"end":return e.stop()}}),e)})))()}),[null===t||void 0===t?void 0:t.signer._address]),l.a.useEffect((function(){if(t)return Object(u.b)(t.contract,(function(e){x(0===j.length||Number(e.id)!==Number(j[j.length-1].id)?[].concat(Object(a.a)(j),[e]):Object(a.a)(j))}))}),[null===t||void 0===t?void 0:t.signer._address,j]),l.a.useEffect((function(){if(t)return Object(u.c)(t.contract,(function(e,t){x(0===j.length?Object(a.a)(j):j.map((function(n){return Number(n.id)===Number(e)&&(n.sellingPrice=0,n.dailyLicensePrice=0,n.owner=t),n})))}))}),[null===t||void 0===t?void 0:t.signer._address,j]),l.a.useEffect((function(){if(t)return Object(u.d)(t.contract,(function(e,t){x(0===j.length?Object(a.a)(j):j.map((function(n){return Number(n.id)===Number(e)&&(n.sellingPrice=Number(t)),n})))}))}),[null===t||void 0===t?void 0:t.signer._address,j]),l.a.useEffect((function(){if(t)return Object(u.a)(t.contract,(function(e,t){x(0===j.length?Object(a.a)(j):j.map((function(n){return Number(n.id)===Number(e)&&(n.dailyLicensePrice=Number(t)),n})))}))}),[null===t||void 0===t?void 0:t.signer._address,j]),{_signerAddress:o,_nfts:j,mintNFT:function(e){return f.apply(this,arguments)},buyNFT:function(e){return h.apply(this,arguments)},buyLicense:function(e){return g.apply(this,arguments)},updateSellingPrice:function(e){return y.apply(this,arguments)},updateDailyLicensePrice:function(e){return O.apply(this,arguments)},recordIPRInfringementAttempts:function(e){return v.apply(this,arguments)},getTokenPurchasedEventsForNFT:function(e){return N.apply(this,arguments)},getLicensePurchasedEventsForNFT:function(e){return w.apply(this,arguments)},getInfringmentAttemptsRecordedEventForNFT:function(e){return k.apply(this,arguments)}}}}).call(this,n(7).Buffer)},677:function(e,t){},700:function(e,t){},702:function(e,t){},707:function(e,t){},709:function(e,t){},740:function(e,t){},741:function(e,t){},772:function(e,t){},815:function(e,t){},822:function(e,t){},824:function(e,t){}},[[1270,1,2]]]);
//# sourceMappingURL=main.ff5aeee6.chunk.js.map